<!doctype html>
<!--[if lt IE 7 ]> <html class="no-js ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
<meta charset="utf-8" />

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

<title>Welcome. This is the future of search. Yay!</title>
<meta name="description" content="I-SEARCH project is a multi-modal search engine." />
<meta name="author" content="I-SEARCH project members" />

<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />

<meta name="viewport" content="width=device-width, initial-scale=1.0; user-scalable=0;"/>

<!-- For iPhone 4 with high-resolution Retina display: -->
<link rel="apple-touch-icon-precomposed" sizes="114x114"
	href="img/h/apple-touch-icon.png" />
<!-- For first-generation iPad: -->
<link rel="apple-touch-icon-precomposed" sizes="72x72"
	href="img/m/apple-touch-icon.png" />
<!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
<link rel="apple-touch-icon-precomposed"
	href="img/l/apple-touch-icon-precomposed.png" />
<!-- For nokia devices: -->
<link rel="shortcut icon" href="img/l/apple-touch-icon.png" />

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<link rel="apple-touch-startup-image" href="img/l/splash.png" />

<!-- Mobile IE allows us to activate ClearType technology for smoothing fonts for easy reading -->
<meta http-equiv="cleartype" content="on" />
<link rel="stylesheet" href="css/style.css?v=2" />
<!-- <link rel="stylesheet" href="css/token-input.css"/> -->
<link rel="stylesheet" href="css/token-input.css" />

<link rel="stylesheet" href="css/vis.css" />
<link rel="stylesheet" href="css/uiiface.css" />
<link rel="stylesheet" href="css/jquery-ui-1.8.14.custom.css" />
<body>
	<div id="settings">
		<span id="login-status">Hello Guest</span> 
		<ul class="clearfix">
		  <li id="button-login-settings"><a href="javascript:void(0)">Login</a></li>
		  <li id="button-global-settings"><a href="javascript:void(0)"><img src="img/settings.png" height="30" alt="Settings" title="General search settings"></a></li>
		</ul>  
	</div>
	<div class="settings-panel" id="login-settings">
    <form method="post" action="#">
      <section class="setting">
        <label for="email">Email</label> <input type="text" id="email" name="email" />
      </section>
  
      <section class="setting clearfix">
        <label for="password">Password</label> <input type="password" id="pw" name="pw" />
      </section>
    </form>
  </div>  
  <div class="settings-panel" id="global-settings">
    <form method="post" action="#">
      
      <section class="setting">
        <label for="audio-cluster-type">Audio Use Case?</label> 
        <div class="checkbox"><input type="checkbox" id="audio-cluster-type" /></div>
      </section>
      
      <section class="setting clearfix">
        <label for="max-num-results">Size of result</label> 
        <input type="text" id="max-num-results" size="8" />
      </section>
<!--
      <section class="setting">
        <label for="icon-size">Icon size</label> <select id="icon-size">
          <option value="16">16</option>
          <option value="32">32</option>
          <option value="64">64</option>
          <option value="128">128</option>
        </select>
      </section>

      <section class="setting clearfix">
        <label for="visualization-method">Visualization Method</label> 
        <select id="visualization-method">
          <option value="classic">Classic</option>
          <option value="tmap">Tree Map</option>
          <option value="htree">Hyperbolic Tree</option>
          <option value="hpanel">Hierarchy Panels</option>
        </select>
      </section>
-->
    </form>
  </div>
  <div class="settings-panel" id="messages">
  </div>  
	<div id="container">
		<header>
			<h1>
				<img src="img/logo.png" alt="iSearch - A multi-modal search engine" id="logo" />
			</h1>
		</header>
		<div id="main" role="main">

			<div id="cofind"></div>

			<div id="queryContainer">
				<form id="query" action="#" method="post">
					<input type="text" name="query" id="query-field" />
					<input type="button" name="query-submit" id="query-submit" value=">" />
					<input type="submit" style="visibility:hidden;" />
				</form>
			</div>

			<nav class="query-composition">
				<ul>
					<li data-mode="sound"><a> <img
							src="img/icon-isearch-sound.png" alt="Sound" /> </a></li>
					<li data-mode="rhythm"><a> <img
							src="img/icon-isearch-rhythm.png" alt="Rhythm" /> </a></li>							
					<li data-mode="picture"><a> <img
							src="img/icon-isearch-picture.png" alt="Picture" /> </a></li>
          <li data-mode="video">
            <a>
              <img src="img/icon-isearch-video.png" alt="Video" />
            </a>
          </li>							
					<li data-mode="sketch"><a> <img
							src="img/icon-isearch-sketch.png" alt="Sketch" /> </a></li>
					<li data-mode="3d"><a> <img src="img/icon-isearch-3d.png"
							alt="3D" /> </a></li>
          <li data-mode="emotion">
            <a>
              <img src="img/icon-isearch-emotion.png" alt="Emotion" />
            </a>
          </li>
					<li data-mode="geolocation"><a> <img
							src="img/icon-isearch-geolocation.png" alt="Geolocation" /> </a></li>
					<li data-mode="text"><a> <img
							src="img/icon-isearch-text.png" alt="text" /> </a></li>
				</ul>
			</nav>

			<section class="panel sound">
				<p class="instruction" id="soundDrop">Grab an audio file and
					drop it here</p>
				<p class="instruction">
					Upload a file with this button: 
					<button class="upload">Upload</button>
				</p>
				<input type="file" id="soundUpload"	style="visibility: hidden;" />
				<p class="instruction">
					Use your device and start to say/sing something:
					<button>Start</button>
				</p>
				<footer>
					<a href="#">close</a>
				</footer>
			</section>

			<section class="panel rhythm">
				<p class="instruction" id="rhythmDrop">Grab an audio file with a rhythm and
					drop it here</p>
				<p class="instruction">
					Upload a file with this button: 
					<button class="upload">Upload</button>
				</p>
				<input type="file" id="rhythmUpload" style="visibility: hidden;" />
				<p class="instruction">
					Use your device and start tapping a rhythm:
            <div>
              <p class="rhythm">
                <progress id="progress-bar" max="10" value="0"></progress>
              </p>
              <p class="rhythm">
                <label for="progress-bar">Elapsed time in seconds:
                  <span id="elapsed-span"></span>
                </label>          
              </p>      
              <p class="rhythm">  
                <label for="duration-spinner">Duration in seconds:</label>
                <input id="duration-spinner" type="number" value="10" max="60" min="5" step="1" />      
              </p>
              <p class="rhythm">
                <button id="rhythm-button">Start</button>      
              </p>  
              <canvas id="rhythm-canvas" class="rhythm"></canvas>  

              <script type="application/javascript">
                (function() {
                  // get handlers to UI elements
                  var progressBar = document.getElementById('progress-bar');
                  var rhythmButton = document.getElementById('rhythm-button');
                  var durationSpinner = document.getElementById('duration-spinner');
                  var elapsedSpan = document.getElementById('elapsed-span');
                  var rhythmCanvas = document.getElementById('rhythm-canvas');      
                  rhythmCanvas.width = 200;
                  rhythmCanvas.height = 20;
                  var ctx = rhythmCanvas.getContext('2d'); 
                  ctx.fillStyle = 'rgb(200,0,0)';         

                  // initial state
                  var running = false;
                  var start = 0;      
                  var timer = false;
                  var rhythm = {};
                  var scalingFactor = rhythmCanvas.width / progressBar.max;

                  // draw scale
                  var drawScale = function() {
                    ctx.clearRect (0 , 0, rhythmCanvas.width, rhythmCanvas.height);      
                    var i = 0;
                    var x = 0;
                    ctx.fillStyle = 'rgb(0,0,0)';         
                    while(x <= rhythmCanvas.width) {        
                      x = scalingFactor * i;
                      ctx.fillRect (x, 18, 1, 2);
                      i++;
                    }
                    ctx.fillStyle = 'rgb(200,0,0)';         
                  }
                  drawScale();

                  // on rhythm button click
                  rhythmButton.addEventListener('click', function(e) {
                    // if state is "not running"
                    if (!running) {
                      // set state to "running"
                      rhythmButton.innerHTML = 'Tap';
                      running = true;
                      progressBar.value = 0;
                      drawScale();
                      durationSpinner.disabled = true;
                      start = new Date().getTime();          
                      scalingFactor = rhythmCanvas.width / progressBar.max;

                      // set timer
                      timer = setInterval(function() {            
                        // calculate the elapsed time since the beginning of the timer
                        var elapsed = Math.floor((new Date().getTime() - start) / 1000);
                        elapsedSpan.innerHTML = elapsed;
                        progressBar.value = elapsed;

                        // if the timer has ended
                        if (elapsed >= progressBar.max) {
                          // set state to "not running"
                          clearInterval(timer);
                          rhythmButton.disabled = true;
                          rhythmButton.innerHTML = 'Finished';
                          setTimeout(function() {
                            rhythmButton.disabled = false;
                            rhythmButton.innerHTML = 'Start';
                          }, 5000);              
                          durationSpinner.disabled = false;              
                          running = false;
                          start = 0;
                          timer = false;
                        }            
                      }, 1000);          
                    // if state is "running"          
                    } else {
                      var heartBeat = (new Date().getTime() - start) / 1000;
                      console.log('Tap ' + heartBeat);
                      var x = Math.floor(scalingFactor * heartBeat);                    
                      console.log(x+', '+0+', '+1+', '+rhythmCanvas.height)
                      ctx.fillRect (x, 0, 1, rhythmCanvas.height);
                    }
                  }, false);

                  durationSpinner.addEventListener('click', function(e) {
                    progressBar.max = durationSpinner.value;
                    progressBar.value = 0;
                  }, false);
                })();
              </script>
            </div>
				</p>
				<footer>
					<a href="#">close</a>
				</footer>
			</section>


			<section class="panel picture">
				<p class="instruction dropContainer" id="imageDrop">
					<span>Grab a picture and drop it here</span>
				</p>
				<p class="instruction">
					Upload a image with this button: 
					<button class="upload">Upload</button>
				</p>
				<input type="file"	id="imageUpload" style="visibility: hidden;" />
				<p class="instruction">
					Take a picture with your device:
					<button class="shoot">Shoot!</button>
				</p>
				<footer>
					<a href="#">close</a>
				</footer>
			</section>
			
      <section class="panel video">
        <p class="instruction dropContainer" id="videoDrop">
          <span>Grab a video and drop it here</span>
        </p>
        <p class="instruction">
          Upload a video with this button: 
          
          <button class="upload">Upload</button>
        </p>
		<input type="file" id="videoUpload" style="visibility:hidden;"/>
        <p class="instruction">
          Take a video with your device: <button class="shoot">Shoot!</button>
        </p>
        <footer><a href="#">close</a></footer>
      </section>			

			<section class="panel sketch">
				<p class="instruction">
					Draw something directly below
					<canvas id="sketch">
            Erm...too bad. Your browser doesn't support the canvas element.
            Switch to a better one please! :)
          </canvas>
					<input type="file" id="sketchUpload" style="display: none;" />
					<button class="done">Done!</button>
				</p>
				<footer>
					<a href="#">close</a>
				</footer>
			</section>

			<section class="panel 3d">
				<p class="instruction" id="threedDrop">Drag'n'drop one of your
					3D model here</p>
				<p class="instruction">
					Upload a 3D file with this button: 
					<button class="upload">Upload</button>
				</p>
				<input type="file"
						id="threedUpload" style="visibility: hidden;" />
				<footer>
					<a href="#">close</a>
				</footer>
			</section>
      <section class="panel emotion">
        <p class="instruction">
          Drag the slider to include the desired emotion          
        </p>
        <div class="emotion-slider" id="emotion-slider"></div>
        <footer><a href="#">close</a></footer>
      </section>			
			<section class="panel geolocation">
				<p class="instruction">
					Click here to give your current location:
					<button id="getCurrentLocation">Give my location</button>
				</p>
				<p class="instruction">
					Choose a location from the interactive map:
					<button id="chooseLocation">Open map</button>
				</p>
				<footer>
					<a href="#">close</a>
				</footer>
			</section>
			<section class="panel text">
				<p class="instruction">
					Enter you request (old style!): <input type="text"
						value="Type here...slowly :)" />
					<button>Add to query</button>
				</p>
				<footer>
					<a href="#">close</a>
				</footer>
			</section>

			<section class="tags"></section>
		</div>

		<footer><button id="dummyHistorySave" name="HistorySave">HistorySave</button> &copy; 2011 I-SEARCH Project - All rights reserved </footer>
	</div>

	<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=true&amp;v=3.2"></script>
	<script type="text/javascript" src="js/local/iaprtc12.js"></script>
	<!-- All the script dependancies will be managed with requireJS
       More info? Check http://requirejs.org -->
  <script data-main="js/main" src="js/libs/require-jquery.js"></script>     

	<!--No need for GA right now. But maybe later...who knows?!-->
	<!-- <script> -->
	<!--   var _gaq=[["_setAccount","UA-XXXXX-X"],["_trackPageview"]]; -->
	<!--   (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1; -->
	<!--   g.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js"; -->
	<!--   s.parentNode.insertBefore(g,s)}(document,"script")); -->
	<!-- </script> -->

</body>
</html>
